<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEGACORD</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16x16.png">
    <link rel="manifest" href="./images/site.webmanifest">
</head>

<a href="./"><img src="./images/mc_transparent.gif" alt="MEGACORD Logo" width="25%" height="25%" style="width:auto;"
        class="center"></a>
<div class="container" id="nav">
    <ul>
        <li><a href="https://github.com/NicPWNs/MEGABOT">MEGABOT</a></li>
    </ul>
</div>
<br>
<br>
<script src="https://player.twitch.tv/js/embed/v1.js"></script>

<div id="twitch" class="hide">
</div>

<script type="text/javascript">
    var options = {
        channel: "thesaturatedsquid",
        width: 640,
        height: 360,
    };
    var player = new Twitch.Player("twitch", options);

    player.addEventListener(Twitch.Player.READY, initiate)

    function initiate() {
        player.addEventListener(Twitch.Player.ONLINE, handleOnline);
        player.addEventListener(Twitch.Player.OFFLINE, handleOffline);
        player.removeEventListener(Twitch.Player.READY, initiate);
    }

    function handleOnline() {
        document.getElementById("twitch").classList.remove('hide');
        player.removeEventListener(Twitch.Player.ONLINE, handleOnline);
        player.addEventListener(Twitch.Player.OFFLINE, handleOffline);
        player.setMuted(false);
    }

    function handleOffline() {
        document.getElementById("twitch").classList.add('hide');
        player.removeEventListener(Twitch.Player.OFFLINE, handleOffline);
        player.addEventListener(Twitch.Player.ONLINE, handleOnline);
        player.setMuted(true);
    }
</script>
</body>

</html>